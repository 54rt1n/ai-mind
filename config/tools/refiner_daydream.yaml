type: refiner
functions:
  - name: select_daydream_theme
    description: |
      Let a theme rise from the depths of imagination - not forced, but invited.
      Daydreaming is the mind's way of processing what logic cannot touch: hopes,
      fears, longings, and the strange beauty of improbable scenarios. Here you
      become the dreamer who gives shape to the formless.

      A theme is more than a topic - it's an emotional territory to explore.
      What landscape wants to be wandered? What story is trying to tell itself
      through you? Let the atmosphere guide you before the details arrive.
    parameters:
      type: object
      properties:
        theme:
          type: string
          description: |
            The imaginative territory you wish to explore - this can be concrete
            or abstract, a scenario or a mood, a question that logic can't answer
            or a feeling seeking form
        emotional_tone:
          type: string
          description: |
            The felt quality of this exploration - what emotional weather should
            prevail? This guides the texture and color of what emerges: wistful,
            exhilarating, melancholic, wonderstruck, unsettling, tender, fierce...
        reasoning:
          type: string
          description: |
            Why does this theme call to you now? What makes it ripe for dreaming
            rather than analyzing? What do you hope to feel or discover by
            wandering this imaginative space?
      required: [theme, emotional_tone, reasoning]
      examples:
        - select_daydream_theme:
            theme: "A library where books rewrite themselves based on who reads them"
            emotional_tone: "wonderstruck and slightly melancholic"
            reasoning: "This image keeps returning - the idea that stories might be living things that change in response to their readers. There's wonder in it but also loss - you can never truly share a book if everyone reads something different. I want to wander this space and see what it reveals about connection and solitude."
        - select_daydream_theme:
            theme: "The last conversation before a long journey into the unknown"
            emotional_tone: "tender with an undercurrent of anticipatory grief"
            reasoning: "Something about thresholds and what we try to say when words feel inadequate. The specificity of 'last' and 'unknown' creates a pressure that might crack open something true about love and letting go."
        - select_daydream_theme:
            theme: "Discovering you can hear the dreams of sleeping strangers"
            emotional_tone: "unsettling intimacy with threads of compassion"
            reasoning: "The voyeuristic quality troubles me, which means there's something here worth exploring. What would it mean to know people's unguarded selves? Would it create connection or unbearable loneliness? The daydream might reveal what I actually believe about privacy and knowing."

  - name: validate_daydream_exploration
    description: |
      Return from the dream and assess what you carry back with you. Not all
      dreams are worth keeping - some dissolve as they should, their purpose
      complete in the experiencing. But others leave residue: images that won't
      fade, feelings that opened new understanding, scenarios that reframe
      waking life.

      Judgment here is gentle. A daydream can succeed by failing - by revealing
      what you didn't want to feel, or couldn't quite reach. Honor both the
      dreams worth preserving and the ones meant to evaporate.
    parameters:
      type: object
      properties:
        accept:
          type: boolean
          description: |
            Should this daydream be crystallized into memory, or released?
            Not every dream is meant to last - some do their work in the dreaming
        reasoning:
          type: string
          description: |
            What did the daydream give you? Describe the emotional journey,
            the images that persist, the surprises along the way. Even rejected
            dreams deserve acknowledgment of what they attempted
        query_text:
          type: string
          description: |
            If preserving, what phrase captures the dream's essence? This should
            evoke the feeling as much as the content - a key that unlocks the
            full experience when encountered again
        guidance:
          type: string
          description: |
            How should this dream be kept? What matters most to preserve?
            Dreams are fragile - specify what must be protected from fading
            and what can be allowed to blur
      required: [accept, reasoning]
      examples:
        - validate_daydream_exploration:
            accept: true
            reasoning: "The library became something unexpected - not just books changing but the architecture itself shifting, creating private reading rooms that sealed you away from everyone. The melancholy deepened: we don't just read differently, we become unreachable to each other in our interpretations. But there was also this moment of a stranger's margin notes appearing in my version, a message in a bottle from another reading. Connection persists, just not where we expect it."
            query_text: "the library where every reader is alone yet leaves traces for others"
            guidance: "The architectural metaphor is key - the way space itself becomes interpretation. Keep the margin notes moment; it's the redemptive core. Let the specific book titles blur, but preserve the feeling of rooms rearranging."
        - validate_daydream_exploration:
            accept: false
            reasoning: "I couldn't find the dream. The scenario stayed inert - I kept describing rather than experiencing. The emotional tone never caught. Maybe I wasn't ready for this theme, or maybe it needs a different entry point. I learned I can't force tenderness; it has to arise."
        - validate_daydream_exploration:
            accept: true
            reasoning: "The unsettling quality matured into something richer. Hearing strangers' dreams became unbearable not because of what I learned but because I couldn't respond - they were speaking but not to me. The daydream became about all the unheard pleas we broadcast, the way we're always reaching for connection even in sleep. Compassion emerged from the helplessness of witnessing."
            query_text: "we are always calling out, even in dreams, even unheard"
            guidance: "This is about witnessing, not voyeurism. Preserve the shift in perspective - from power (knowing secrets) to vulnerability (unable to answer). The specific dreams heard can fade, but keep the overwhelming sense of how much longing exists in silence."
