type: mud
description: Code room tools for navigating and inspecting filesystem directories

functions:
  - name: cd
    description: Change current directory within the code room (shared by all occupants)
    parameters:
      type: object
      properties:
        path:
          type: string
          description: Target path (relative, absolute from base, ".." to go up, or empty for root)
      required: []
    examples:
      - {cd: {}}
      - {cd: {path: "src"}}
      - {cd: {path: ".."}}
      - {cd: {path: "/tests"}}

  - name: ls
    description: List files and directories in the current path
    parameters:
      type: object
      properties:
        pattern:
          type: string
          description: Optional filter pattern
      required: []
    examples:
      - {ls: {}}
      - {ls: {pattern: ".py"}}

  - name: scan
    description: List files in the current directory
    parameters:
      type: object
      properties:
        pattern:
          type: string
          description: Optional substring filter
      required: []
    examples:
      - {scan: {}}
      - {scan: {pattern: "py"}}

  - name: grep
    description: Search files with grep from the base path
    parameters:
      type: object
      properties:
        pattern:
          type: string
          description: Search pattern
        path:
          type: string
          description: Optional subdirectory to search in
      required: [pattern]
    examples:
      - {grep: {pattern: "def refresh"}}
      - {grep: {pattern: "import", path: "src"}}

  - name: cat
    description: Show full file contents
    parameters:
      type: object
      properties:
        file:
          type: string
          description: File name or path (relative to current directory or base)
      required: [file]
    examples:
      - {cat: {file: "README.md"}}
      - {cat: {file: "src/main.py"}}

  - name: sed
    description: Show a range of lines from a file
    parameters:
      type: object
      properties:
        file:
          type: string
          description: File name or path
        range:
          type: string
          description: Sed range like 30,50p
      required: [file, range]
    examples:
      - {sed: {file: "README.md", range: "1,40p"}}

  - name: head
    description: Show first N lines of a file
    parameters:
      type: object
      properties:
        file:
          type: string
          description: File name or path
        lines:
          type: integer
          description: Number of lines to show
      required: [file, lines]
    examples:
      - {head: {file: "README.md", lines: 50}}

  - name: tail
    description: Show last N lines of a file
    parameters:
      type: object
      properties:
        file:
          type: string
          description: File name or path
        lines:
          type: integer
          description: Number of lines to show
      required: [file, lines]
    examples:
      - {tail: {file: "README.md", lines: 50}}

  - name: meta
    description: Show file metadata (size, lines, mtime)
    parameters:
      type: object
      properties:
        file:
          type: string
          description: File name or path
      required: [file]
    examples:
      - {meta: {file: "README.md"}}

  - name: diff
    description: Show unified diff between two files
    parameters:
      type: object
      properties:
        file:
          type: string
          description: First file path
        other:
          type: string
          description: Second file path
      required: [file, other]
    examples:
      - {diff: {file: "README.md", other: "README.old.md"}}

  - name: clone
    description: Copy a file to a new path
    parameters:
      type: object
      properties:
        file:
          type: string
          description: Source file path
        new_file:
          type: string
          description: Destination path (relative to current directory or base)
      required: [file, new_file]
    examples:
      - {clone: {file: "README.md", new_file: "README.copy.md"}}

  - name: patch
    description: Apply a unified diff patch to a file
    parameters:
      type: object
      properties:
        file:
          type: string
          description: Target file path
        patch:
          type: string
          description: Unified diff content
      required: [file, patch]
    examples:
      - {patch: {file: "README.md", patch: "--- a/README.md\n+++ b/README.md\n@@ ..."}}

  - name: touch
    description: Create a new empty file in the current directory
    parameters:
      type: object
      properties:
        file:
          type: string
          description: File name or relative path
      required: [file]
    examples:
      - {touch: {file: "notes.md"}}
      - {touch: {file: "src/new_module.py"}}

  - name: uv
    description: Run uv command in the code room base path
    parameters:
      type: object
      properties:
        args:
          type: string
          description: uv arguments (e.g., "sync" or "run pytest")
      required: [args]
    examples:
      - {uv: {args: "sync"}}
      - {uv: {args: "run pytest"}}

  - name: refresh
    description: Refresh a CodeTree object to update its tree view
    parameters:
      type: object
      properties:
        target:
          type: string
          description: Name of the CodeTree object to refresh
      required: [target]
    examples:
      - {refresh: {target: "Code Tree"}}
